{"version":3,"file":null,"sources":["../src/index.js"],"sourcesContent":["import './style.scss'\n\nconst replace = (data, string) => Object.keys(data)\n\t.reduce(\n\t\t(string, key) => string.replace(RegExp(`{\\s*${key}\\s*}`, 'g'), data[key])\n\t\t, string\n\t)\n\nconst i18n = (dictionary => (key, data = {}) => replace(data, dictionary[key] || key))({\n\t'unknown level {num}': 'Niveau {num} inconnu!',\n\t'loading level {num}': 'Chargement niveau {num}...',\n\t'loading avatar {avatar}': 'Chargement avatar {avatar}...',\n\t'loading world {world}': 'Chargement monde {world}...',\n\t'activate arrow keys control': 'Activation contrôles flèches.',\n\t'deactivate arrow keys control': 'Désactivation contrôles flèches.',\n\t'out of map': 'Houlà, je vais sortir de la carte /!\\\\',\n\t'hit a wall': 'Aïe, je me suis cogné |-o',\n\t'radar ok': 'Ok, je peux avancer ;-)',\n\t'radar ko': 'Ho, je suis bloqué :°(',\n\twon: 'Hé, j\\'ai gagné \\\\o/',\n\twalk: 'avance',\n\tback: 'recule',\n\t//orientation: 'orientation',\n\tturn: 'tourne',\n\tturnR: 'tourneD',\n\tturnL: 'tourneG',\n\tjump: 'saute',\n\t//radar: 'radar',\n})\n\nlet matrix\n\nconst levels = [\n\t[\n\t\t[0, 0, 1, 1, 1],\n\t\t[1, 0, 0, 0, 1],\n\t\t[1, 0, 1, 0, 1],\n\t\t[1, 0, 0, 0, 0],\n\t\t[1, 1, 1, 1, 0]\n\t],\n\t[\n\t\t[0, 1, 0, 0, 0],\n\t\t[0, 1, 0, 1, 0],\n\t\t[0, 1, 0, 1, 0],\n\t\t[0, 1, 0, 1, 0],\n\t\t[0, 0, 0, 1, 0]\n\t],\n\t[\n\t\t[0, 0, 1, 1, 1, 1, 1, 1, 1, 1],\n\t\t[1, 0, 1, 1, 0, 0, 0, 0, 0, 1],\n\t\t[1, 0, 0, 0, 0, 0, 1, 1, 0, 1],\n\t\t[1, 1, 1, 1, 1, 1, 1, 1, 0, 1],\n\t\t[1, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n\t\t[1, 0, 1, 0, 1, 0, 1, 1, 1, 1],\n\t\t[1, 0, 1, 0, 0, 0, 1, 0, 0, 1],\n\t\t[1, 0, 1, 1, 1, 1, 1, 0, 1, 1],\n\t\t[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t[1, 1, 1, 1, 1, 1, 1, 1, 1, 0]\n\t],\n]\n\nconst bot = document.querySelector('.bot')\nconst faces = ['top', 'front', 'left', 'right', 'back', 'bottom']\nArray.prototype.forEach.call(\n\tbot.querySelectorAll('div'),\n\tpart => faces.forEach(face => part.appendChild(document.createElement('div')).className = face)\n)\n\nlet moving = Promise.resolve({ a: 270, x: 0, y: 0, z: 0 })\n\nconst render = (bot, position) => new Promise(resolve => {\n\tconst done = event => {\n\t\tresolve(position)\n\t\tif (winning(position)) {\n\t\t\tgame.classList.add('animate')\n\t\t\tconsole.log(`%c${i18n('won')}`, 'font-size: 1.2em')\n\t\t} else {\n\t\t\tgame.classList.remove('animate')\n\t\t}\n\t\tbot.removeEventListener('transitionend', done)\n\t}\n\tbot.style = `transition: transform .3s; transform: translateX(${3 * position.x}rem) translateY(${-3 * position.y}rem) translateZ(${7.5 + position.z * 6}em) rotateZ(${position.a}deg)`\n\tbot.addEventListener('transitionend', done, false)\n\tsetTimeout(_ => resolve(position), 300) // force resolution when no CSS transition\n})\n\nconst forward = position => {\n\tlet { a, x, y, z } = position\n\tconst rotation = a % 360\n\tif (0 <= rotation && rotation < 90)\n\t\ty--\n\telse if (90 <= rotation && rotation < 180)\n\t\tx--\n\telse if (180 <= rotation && rotation < 270)\n\t\ty++\n\telse if (270 <= rotation && rotation < 360)\n\t\tx++\n\treturn { a, x, y, z }\n}\n\nconst winning = position => {\n\tconst { x, y } = position\n\treturn y === (matrix.length - 1) && x === (matrix[y].length - 1)\n}\n\nconst check = position => {\n\tconst { x, y, z } = position\n\tif (0 > y || y >= matrix.length || 0 > x || x >= matrix[y].length)\n\t\tthrow new RangeError(i18n('out of map'))\n\tif (matrix[y][x] > z)\n\t\tthrow new Error(i18n('hit a wall'))\n\treturn position\n}\n\nconst rotate = angle => ({ x, y, z }) => ({ a: angle, x, y, z })\n\nconst actions = {\n\twalk () {\n\t\tconst previous = moving\n\t\tmoving = moving\n\t\t\t.then(position => check(forward(position)))\n\t\t\t.then(position => render(bot, position))\n\t\t\t.catch(error => {\n\t\t\t\tconsole.warn(error.message)\n\t\t\t\treturn previous\n\t\t\t})\n\t\treturn this\n\t},\n\tback () {\n\t\tactions.turn.call(this, 180)\n\t\treturn actions.walk.call(this)\n\t},\n\torientation (angle) {\n\t\tmoving = moving\n\t\t\t.then(rotate(angle || 0))\n\t\t\t.then(position => render(bot, position))\n\t\treturn this\n\t},\n\tturn (angle) {\n\t\tmoving = moving\n\t\t\t.then(position => rotate(position.a + (angle || 360))(position))\n\t\t\t.then(position => render(bot, position))\n\t\treturn this\n\t},\n\tturnR () {\n\t\treturn actions.turn.call(this, 90)\n\t},\n\tturnL () {\n\t\treturn actions.turn.call(this, -90)\n\t},\n\tjump (height = 1) {\n\t\tmoving = moving\n\t\t\t.then(({ a, x, y, z }) => render(bot, { a, x, y, z: z + height }))\n\t\t\t.then(({ a, x, y, z }) => render(bot, { a, x, y, z: z - height }))\n\t\treturn this\n\t},\n\tradar () {\n\t\treturn moving\n\t\t\t.then(position => check(forward(position)) && console.log(`%c${i18n('radar ok')}`, 'color: green') || true)\n\t\t\t.catch(error => console.log(`%c${i18n('radar ko')}`, 'color: red') || false)\n\t}\n}\n\nconst game = document.querySelector('.game')\n\nconst level = (num = 0) => {\n\tif (!levels.hasOwnProperty(num))\n\t\treturn console.error(i18n('unknown level {num}', { num }))\n\tconsole.log(i18n('loading level {num}', { num }))\n\tmatrix = levels[num]\n\tgame.style = `width: ${3 * matrix[0].length}em; height: ${3 * matrix[0].length}em;`\n\tgame.parentNode.style = `width: ${3 * matrix[0].length}em;`\n\tgame.innerHTML = ''\n\tmatrix.forEach(row =>\n\t\trow.forEach(z =>\n\t\t\tgame.appendChild(document.createElement('div')).className = `block-${z}`\n\t\t)\n\t)\n\tmoving = Promise.resolve({ a: 270, x: 0, y: 0, z: 0 })\n\t\t.then(position => render(bot, position))\n\tlevel.num = num\n}\n\nconst skin = avatar => {\n\tconsole.log(i18n('loading avatar {avatar}', { avatar }))\n\tbot.className = `bot ${avatar}`\n}\n\nconst design = world => {\n\tconsole.log(i18n('loading world {world}', { world }))\n\tgame.className = `game ${world}`\n}\n\n\nconst control = ((document, input, actions) => {\n\tconst key = { left: 37, up: 38, right: 39, down: 40, space: 32, r: 82 }\n\n\tconst handler = event => {\n\t\tlet orientation\n\t\tif (event.keyCode === key.up) orientation = actions.orientation(180)\n\t\telse if (event.keyCode === key.right) orientation = actions.orientation(270)\n\t\telse if (event.keyCode === key.down) orientation = actions.orientation(360)\n\t\telse if (event.keyCode === key.left) orientation = actions.orientation(90)\n\t\telse if (event.keyCode === key.space) actions.jump()\n\t\telse if (event.keyCode === key.r) actions.radar()\n\t\tif (orientation && !event.ctrlKey) actions.walk()\n\t}\n\n\tconst control = activate => {\n\t\tinput.checked = activate\n\t\tif (activate) {\n\t\t\tconsole.log(i18n('activate arrow keys control'))\n\t\t\tdocument.addEventListener('keydown', handler)\n\t\t} else {\n\t\t\tconsole.log(i18n('deactivate arrow keys control'))\n\t\t\tdocument.removeEventListener('keydown', handler)\n\t\t}\n\t}\n\n\tinput.addEventListener('change', event => control(input.checked))\n\n\tObject.defineProperty(control, 'activated', { get: () => input.checked })\n\n\tcontrol(input.checked) // init state\n\n\treturn control\n})(document, document.querySelector('#control'), actions)\n\n// localized api\nconst api = Object.keys(actions)\n\t.reduce((api, action) => {\n\t\tconst i18nAction = i18n(action)\n\t\tapi[i18nAction] =\n\t\t// expose simpler global api\n\t\twindow[i18nAction] = \n\t\t\tactions[action]\n\t\treturn api\n\t}, Object.create(null))\n\nconst play = (api => run => {\n\trun && run(api)\n\treturn api\n})(api)\n\n\n\n// expose api utils\nconst avatars = ['mario', 'catcher', 'agent', 'bold', 'oldman', 'bug', 'pirate', 'princess']\n\t.reduce((avatars, avatar) => Object.defineProperty(avatars, avatar, { get: () => skin(avatar) }), Object.create(null))\nconst worlds = ['ground', 'pyramyd', 'inferno', 'north', 'library', 'virtual', 'tnt', 'halloween']\n\t.reduce((worlds, world) => Object.defineProperty(worlds, world, { get: () => design(world) }), Object.create(null))\nObject.defineProperties(play, {\n\tcontrol: { set: control, get: () => control.activated },\n\tlevel: { set: level, get: () => level.num },\n\tavatar: { set: skin, get: () => avatars },\n\tworld: { set: design, get: () => worlds }\n})\n\n// easy inspect\nplay.__proto__ = null\ndelete play.length\ndelete play.name\n\nexport default play\n\n// init game\nlevel(0)\nskin('mario')\ndesign('ground')\n"],"names":["const","let"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAEAA,IAAM,OAAO,GAAG,UAAC,IAAI,EAAE,MAAM,EAAE,SAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;EACjD,MAAM;EACN,UAAC,MAAM,EAAE,GAAG,EAAE,SAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAA,KAAK,GAAE,GAAG,QAAK,CAAC,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,GAAA;IACvE,MAAM;EACR,GAAA;;AAEFA,IAAM,IAAI,GAAG,CAAC,UAAA,UAAU,EAAC,SAAG,UAAC,GAAG,EAAE,IAAS,EAAE;4BAAP,GAAG,EAAE;;QAAK,OAAO,CAAC,IAAI,EAAE,UAAU,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC;GAAA,EAAA,CAAC,CAAC;CACtF,qBAAqB,EAAE,uBAAuB;CAC9C,qBAAqB,EAAE,4BAA4B;CACnD,yBAAyB,EAAE,+BAA+B;CAC1D,uBAAuB,EAAE,6BAA6B;CACtD,6BAA6B,EAAE,+BAA+B;CAC9D,+BAA+B,EAAE,kCAAkC;CACnE,YAAY,EAAE,wCAAwC;CACtD,YAAY,EAAE,2BAA2B;CACzC,UAAU,EAAE,yBAAyB;CACrC,UAAU,EAAE,wBAAwB;CACpC,GAAG,EAAE,sBAAsB;CAC3B,IAAI,EAAE,QAAQ;CACd,IAAI,EAAE,QAAQ;;CAEd,IAAI,EAAE,QAAQ;CACd,KAAK,EAAE,SAAS;CAChB,KAAK,EAAE,SAAS;CAChB,IAAI,EAAE,OAAO;;CAEb,CAAC;;AAEFC,IAAI,MAAM;;AAEVD,IAAM,MAAM,GAAG;CACd;EACC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf;CACD;EACC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EACf;CACD;EACC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,C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"}